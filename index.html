<!DOCTYPE HTML>
<!--
	Strata by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Strata by HTML5 UP</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		
		<!-- d3.js scrips -->
		<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
		<script src="node_modules/datamaps/dist/datamaps.world.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

		<link href="/assets/css/nouislider.min.css" rel="stylesheet">

		<!-- In <body> -->
		<script src="/lib/nouislider.min.js"></script>


	</head>
	<body id="top">

		<!-- Header -->
			<header id="header">
				<a href="#" class="image avatar"><img src="images/avatar.jpg" alt="" /></a>
				<h1><strong>I am Strata</strong>, a super simple<br />
				responsive site template freebie<br />
				crafted by <a href="http://html5up.net">HTML5 UP</a>.</h1>
			</header>

		<!-- Main -->
			<div id="main">

				<!-- One -->
					<section id="one">
						<h2>Vi testar en karta h√§r: </h2>
						<div id="container" style="position: relative; width: 800px; height: 680px;"></div>
						
						
						<div id ="slider-snap" style="margin-top: 20px;"></div>
						<p id="slider-snap-value-lower"></p>
						<p id="slider-snap-value-upper"></p>

						<script src="\js\mapController.js"></script>

							<button id="b">export to json-5t1ng1f13d</button>
						    
						    <script type="text/javascript">
						  		
						  		var myCsvArray = [];
						  		var temp = [];

						  		for (var j = 0; j < 113500 ; j = j + 500) {


							  		$.ajax({
									    //dataType: "json",
									    url: 'http://kulturarvsdata.se/ksamsok/api?stylesheet=&x-api=lsh772&method=search&hitsPerPage=500&sort=toTime&startRecord='+j+'&query=create_toTime%3E%3D'+1851+'+and+create_fromTime%3C%3D'+1900,
									    type: 'GET',
									    withCredentials: true,
									})
									.done(function(testData) {

										console.log("count:");

										for (var i = 0; i < 500; i++) {
											//console.log("second loop: "+i);
											myCsvCountry = testData.getElementsByTagName("countryName")[i];	

											if (myCsvCountry ) {
												
												if (temp.indexOf(myCsvCountry.childNodes[0].nodeValue) == -1) {
													myCsvArray.push({"placeName" : myCsvCountry.childNodes[0].nodeValue, "yearInterval" : [1850,1900], amount: 1});	
													temp.push(myCsvCountry.childNodes[0].nodeValue);	
												}
												else {
													myCsvArray[temp.indexOf(myCsvCountry.childNodes[0].nodeValue)].amount++;
												}
											}	
					
										};
										


									}).fail(function(req) {	
										console.log("err");
									});
								};

						        function exportToCsv() {

						            console.log(myCsvArray);
						            window.open('data:text/csv;charset=utf-8,' + escape(JSON.stringify(myCsvArray)));
						        }

						        var button = document.getElementById('b');
						        button.addEventListener('click', exportToCsv);
						    </script>
						
					</section>

				<!-- Two -->
					<section id="two">
						<h2>Recent Work</h2>
						<div class="row">
							<article class="6u 12u$(xsmall) work-item">
								<a href="images/fulls/01.jpg" class="image fit thumb"><img src="images/thumbs/01.jpg" alt="" /></a>
								<h3>Magna sed consequat tempus</h3>
								<p>Lorem ipsum dolor sit amet nisl sed nullam feugiat.</p>
							</article>
						</div>
						<ul class="actions">
							<li><a href="#" class="button">Full Portfolio</a></li>
						</ul>
					</section>

				<!-- Three -->
					<section id="three">
						<h2>Get In Touch</h2>
					</section>

			</div>

		<!-- Footer -->
			<footer id="footer">
				<ul class="icons">
					<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
					<li><a href="#" class="icon fa-github"><span class="label">Github</span></a></li>
					<li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>
					<li><a href="#" class="icon fa-envelope-o"><span class="label">Email</span></a></li>
				</ul>
				<ul class="copyright">
					<li>&copy; Untitled</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
				</ul>
			</footer>

		<!-- Scripts -->


			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.poptrox.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>